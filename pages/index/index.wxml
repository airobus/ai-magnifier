<!--index.wxml-->

<!-- è¿”å›æŒ‰é’® -->
<view class="back-button" wx:if="{{imageUrl}}" bindtap="goBack">
  <text class="back-icon">â†</text>
</view>

<!-- è¯†åˆ«ç»“æœå±•ç¤º -->
<block wx:if="{{imageUrl}}">
  <view class="result-page">
    <!-- å›¾ç‰‡é¢„è§ˆ -->
    <image class="preview-image" src="{{imageUrl}}" mode="widthFix"></image>
    
    <!-- AIå›ç­”åŒºåŸŸ -->
    <view class="answer-panel {{isAnalyzing || streamResponse ? 'sliding-up' : ''}}">
      <!-- å……ç”µå¼è¿›åº¦æ¡ -->
      <view class="battery-progress" wx:if="{{isAnalyzing}}">
        <view class="battery-outline">
          <view class="battery-head"></view>
          <view class="battery-level"></view>
        </view>
        <view class="analyzing-text">æ­£åœ¨åˆ†æä¸­...</view>
      </view>
      
      <view class="message-bubble">
        <text user-select>{{streamResponse}}</text>
      </view>
    </view>
  </view>
</block>

<!-- é¦–é¡µå†…å®¹ -->
<block wx:else>
  <scroll-view class="scrollarea" scroll-y type="list">
    <view class="container">
      <view class="eyes-container">
        <view class="eye">
          <view class="pupil"></view>
        </view>
        <view class="eye">
          <view class="pupil"></view>
        </view>
      </view>
    </view>
  </scroll-view>
</block>

<!-- åº•éƒ¨æŒ‰é’® - å§‹ç»ˆæ˜¾ç¤º -->
<view class="action-section">
  <view class="button-container">
    <view class="mega-button" bindtap="takePhoto">
      <view class="button-inner">
        <view class="icon-wrapper">
          <text class="button-icon">ğŸ“¸</text>
        </view>
        <text class="button-text">{{imageUrl ? 'é‡æ–°æ‹ç…§' : 'æ‹ç…§è¯†åˆ«'}}</text>
      </view>
      <view class="button-glow"></view>
    </view>
  </view>
</view>
